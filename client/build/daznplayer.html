<!DOCTYPE html>
<html>
  <head>
    <!-- Shaka Player compiled library: -->
    <script src="https://cdn.jsdelivr.net/npm/shaka-player@2.5.9/dist/shaka-player.compiled.min.js"></script>
    <!-- Your application source: -->
  </head>
  <body>
    <video
      id="video"
      width="640"
      poster="//shaka-player-demo.appspot.com/assets/poster.jpg"
      controls
      autoplay
    ></video>
  </body>

  <script>
    var manifestUri =
      "https://dcbos-cl-livedash-perform.secure.footprint.net/1owm2b329n0h41odtt7a2mjgok/web/stream.mpd?channel=1211&mta=en&outlet=dazn-ca&plang=en";

    function initApp() {
      // Install built-in polyfills to patch browser incompatibilities.
      shaka.polyfill.installAll();

      // Check to see if the browser supports the basic APIs Shaka needs.
      if (shaka.Player.isBrowserSupported()) {
        // Everything looks good!
        initPlayer();
      } else {
        // This browser does not have the minimum set of APIs we need.
        console.error("Browser not supported!");
      }
    }

    function initPlayer() {
      // Create a Player instance.
      var video = document.getElementById("video");
      var player = new shaka.Player(video);

      //   player.configure({
      //     drm: {
      //       servers: {
      //         "com.widevine.alpha":
      //           "https://widevine.entitlement.us.theplatform.com/wv/web/ModularDrm?form=json&schema=1.0&account=http%3A%2F%2Faccess.auth.theplatform.com%2Fdata%2FAccount%2F2702025685&_releasePid=ce4i3ndZzsWi&token=eyJhbGciOiJSUzUxMiJ9.eyJzdWIiOiJwZ2xzLXByYy10cnVzdGVkLzAwMTI0MDAwMDFJTTFJMkFBTCIsImlzcyI6IjEiLCJleHAiOjE1ODIzMjM2MTMsImlhdCI6MTU4MjMxNjQxMzM1NCwianRpIjoiOTE0MjFiYzAtMjU1My00NmRiLWEwYjMtZTBmOTcxMjk4MDUxIiwiZGlkIjoicGdscy1wcmMtdHJ1c3RlZCIsInVubSI6IjAwMTI0MDAwMDFJTTFJMkFBTCIsImN0eCI6IntcInVzZXJOYW1lXCI6XCIwMDEyNDAwMDAxSU0xSTJBQUxcIixcImF0dHJpYnV0ZXNcIjp7XCJzdWJzY3JpcHRpb25MZXZlbFwiOlwic3RhbmRhcmRcIn19XG4iLCJvaWQiOm51bGx9.AmyHOP-TGNC6ccHzi5BnfkBR_d8Xz-TFacWhKCh928UEyyN_bHrIIw6evAU0QPdHZG2RBIxTQPKpThl17AfVMykV1W-zlzQkYlzIiiLFxXyqeMYXuDbmZtGreJncUAgLLzz6BPuKUp67rTws3eREaHRzPvQwctpa_airZ21eZoD0Y9Z9RlDkPCjYVwV--99Z-W-peJkWFqBp1b6WRqci-MnxBFiz_vaplXEd5ReneOzbjWu4jPPHtwJKohClcXGowiHlvlYgfBjSD-BuFmKkdKDdmEfNT0HfZ-8qfAhAKJr8ozw_umQJLypuk5C2X5IYECzzWB5wkrRGPkY0-SIqkA"
      //       },
      //       advanced: {
      //         "com.widevine.alpha": {
      //           videoRobustness: "HW_SECURE_ALL",
      //           audioRobustness: "HW_SECURE_ALL"
      //         }
      //       }
      //     }
      //   });

      // Attach player to the window to make it easy to access in the JS console.
      window.player = player;

      // Listen for error events.
      player.addEventListener("error", onErrorEvent);

      // Try to load a manifest.
      // This is an asynchronous process.
      player
        .load(manifestUri)
        .then(function() {
          // This runs if the asynchronous load is successful.
          console.log("The video has now been loaded!");
        })
        .catch(onError); // onError is executed if the asynchronous load fails.
    }

    function onErrorEvent(event) {
      // Extract the shaka.util.Error object from the event.
      onError(event.detail);
    }

    function onError(error) {
      // Log the error.
      console.error("Error code", error.code, "object", error);
    }

    document.addEventListener("DOMContentLoaded", initApp);
  </script>
</html>
